<!--搜索框 开始-->
<div class="search-container">
  <div class="search-box" >
    <a class="search-bar" href="{{helper.urlgen('so_activity')}}">
      <p id="search-content">请输入活动标题或关键词</p>
      <div style="width: 30px;height: 30px;text-align: right;line-height: 30px;" id="search-btn">
        <svg class="icon icon-sousuo" aria-hidden="true">
          <use xlink:href="#icon-sousuo"></use>
        </svg>
      </div>
    </a>
  </div>
  <div class="cancel-btn" id="cancel-btn">更多<svg class="icon" aria-hidden="true" style="color: #fff;margin-left:5px;font-size: 14px;">
      <use xlink:href="#icon-xuanxiang"></use>
    </svg>
  </div>
</div>
<!--搜索框 结束-->
<div class="so-box" id="so-box">
  <div class="so-box-content" id="so-box-content">
    <!--国家-->
    {%
    set countryList = [
    {
    "id": 0,
    "country": "所有国家"
    },
    {
    "id": 1,
    "country": "美国"
    },
    {
    "id": 2,
    "country": "英国"
    },
    {
    "id": 4,
    "country": "澳大利亚"
    },
    {
    "id": 3,
    "country": "加拿大"
    },
    {
    "id": 5,
    "country": "新西兰"
    },
    {
    "id": 51,
    "country": "日本"
    },
    {
    "id": 50,
    "country": "韩国"
    },
    {
    "id": 54,
    "country": "中国香港地区"
    },
    {
    "id": 100,
    "country": "俄罗斯"
    },
    {
    "id": 101,
    "country": "乌克兰"
    },
    {
    "id": 108,
    "country": "爱尔兰"
    },
    {
    "id": 111,
    "country": "意大利"
    },
    {
    "id": 112,
    "country": "西班牙"
    },
    {
    "id": 102,
    "country": "白俄罗斯"
    },
    {
    "id": 52,
    "country": "新加坡"
    },
    {
    "id": 53,
    "country": "马来西亚"
    },
    {
    "id": 110,
    "country": "丹麦"
    },
    {
    "id": 103,
    "country": "德国"
    },
    {
    "id": 104,
    "country": "法国"
    },
    {
    "id": 105,
    "country": "挪威"
    },
    {
    "id": 106,
    "country": "瑞典"
    },
    {
    "id": 107,
    "country": "芬兰"
    },
    {
    "id": 109,
    "country": "荷兰"
    },
    {
    "id": 113,
    "country": "瑞士"
    },
    {
    "id": 55,
    "country": "中国澳门地区"
    },
    {
    "id": 114,
    "country": "奥地利"
    }
    ]
    %}
    <!--时间-->
    {%
    set timeType = [
    {
    "id": 0,
    "type": "所有时间"
    },
    {
    "id": 1,
    "type": "进行中活动"
    },
    {
    "id": 2,
    "type": "未开始活动"
    },
    {
    "id": 3,
    "type": "已过期活动"
    }
    ]
    %}
    <!--学历-->
    {%
    set eduType = [
    {
    "id": 0,
    "type": "所有学历"
    },
    {
    "id": 1,
    "type": "中学"
    },
    {
    "id": 2,
    "type": "本科"
    },
    {
    "id": 3,
    "type": "硕士"
    },
    {
    "id": 4,
    "type": "博士"
    },
    {
    "id": 5,
    "type": "在职"
    }
    ]
    %}
    <div class="so-box-item-title"><svg class="icon" aria-hidden="true">
      <use xlink:href="#icon-32pxquanqiuzhicai"></use>
    </svg>国家</div>
    <div class="so-box-item countryId">{% for item in countryList %}<span data-id="{{item.id}}" class={{'focus-on' if item.id == country else ""}}>{{item.country}}</span>{% endfor %}</div>
    <div class="so-box-item-title"><svg class="icon" aria-hidden="true">
      <use xlink:href="#icon-riqi"></use>
    </svg>时间</div>
    <div class="so-box-item timeType">{% for item in timeType %}<span data-id="{{item.id}}" class={{'focus-on' if item.id == timetype else ""}}>{{item.type}}</span>{% endfor %}</div>
    <div class="so-box-item-title"><svg class="icon" aria-hidden="true">
      <use xlink:href="#icon-boshimao1"></use>
    </svg>学历</div>
    <div class="so-box-item eduType">{% for item in eduType %}<span data-id="{{item.type}}" class={{'focus-on' if item.type == crowd else ""}}>{{item.type}}</span>{% endfor %}</div>
  </div>
</div>
<div class="so-tab" id="so-tab" style="display: none;">
  <span class="so-tab-item">清空</span>
  <span class="so-tab-item_active">确定</span>
</div>
<script>
  $(function () {
      $("#cancel-btn").on('click',function () {
          this.flag=!this.flag;
          if(this.flag){
              $("#so-box").show();
            $("#so-tab").show();
              $("body,html").css("position","fixed")
              $(this).html("收起<svg class=\"icon\" aria-hidden=\"true\" style=\"color: #fff;margin-left:5px;font-size: 14px;\">\n" +
                "<use xlink:href=\"#icon-xuanxiang-copy\"></use>\n" +
                "</svg>")
          }else {
            $(this).html("更多<svg class=\"icon\" aria-hidden=\"true\" style=\"color: #fff;margin-left:5px;font-size: 14px;\">\n" +
              "<use xlink:href=\"#icon-xuanxiang\"></use>\n" +
              "</svg>")
            $("#so-box").hide();
            $("#so-tab").hide();
              $("body,html").css("position","")
          }
      });
      $(".so-box-item span").on("click",function () {
          $(this).addClass('focus-on').siblings().removeClass('focus-on');
      });
      $(".so-tab-item").on("click",function () {
          $(".countryId span").eq(0).addClass('focus-on').siblings().removeClass('focus-on');
          $(".timeType span").eq(0).addClass('focus-on').siblings().removeClass('focus-on');
          $(".eduType span").eq(0).addClass('focus-on').siblings().removeClass('focus-on');
      });
      $(".so-tab-item_active").on("click",function () {
          var area = $.cookie('currentarea') ? $.cookie('currentarea') : 1;
          var country_id =$(".countryId .focus-on").attr("data-id");
          var crowd =$(".eduType .focus-on").attr("data-id");
          var type =$(".timeType .focus-on").attr("data-id");
          if(crowd=="所有学历"){
              crowd=""
          }
          window.location.href =fn.active_urlgen('activity', 'c='+area,'n=' + country_id ,"t=" + type,"crowd=" + crowd )
      })
  })
</script>